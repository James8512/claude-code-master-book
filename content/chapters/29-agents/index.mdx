---
slug: "29-agents"
title: "Agents: 전문화된 서브에이전트의 힘"
description: "Claude Code의 서브에이전트를 활용하여 복잡한 작업을 병렬로 분할 처리하는 고급 기법을 배웁니다."
part: 6
partTitle: "고급 기능 - MCP, Hooks, Agents"
chapter: 29
order: 29
readingTime: "7분"
difficulty: "advanced"
tags: ["Agents", "서브에이전트", "병렬"]
draft: false
---

## 개요

서브에이전트는 메인 Claude Code 세션에서 파생된 독립적인 AI 에이전트입니다. 각 서브에이전트는 자체적으로 200k 토큰의 컨텍스트 윈도우를 가지며, 전문화된 시스템 프롬프트로 특정 역할에 집중합니다. 복잡한 작업을 여러 전문가에게 동시에 분배하는 것과 같습니다.

## 서브에이전트의 핵심 특징

- **독립적 컨텍스트**: 각 에이전트가 200k 토큰의 전용 컨텍스트를 보유
- **병렬 실행**: 여러 에이전트가 동시에 작업 수행 가능
- **전문화된 시스템 프롬프트**: 각 에이전트에 특화된 역할과 지침 부여
- **결과 수집**: 메인 에이전트가 서브에이전트의 결과를 종합

## Ado의 "산타의 엘프들" 비유

<Callout type="info" title="산타의 엘프들">
Ado(Claude Code 개발자)는 서브에이전트를 **산타의 엘프들**에 비유했습니다. 산타(메인 에이전트)는 전체 계획을 세우고, 엘프들(서브에이전트)은 각자 맡은 장난감을 동시에 만듭니다. 한 엘프는 나무를 깎고, 다른 엘프는 색을 칠하고, 또 다른 엘프는 포장합니다.
</Callout>

## TDD 가이드 에이전트 예시

테스트 주도 개발을 전담하는 서브에이전트를 구성합니다:

```markdown
## TDD Agent System Prompt

당신은 TDD 전문가입니다. 다음 규칙을 엄격히 따르세요:

1. 먼저 실패하는 테스트를 작성합니다
2. 테스트를 통과하는 최소한의 코드를 작성합니다
3. 리팩토링합니다
4. 테스트 커버리지 80% 미만이면 추가 테스트를 작성합니다
5. 엣지 케이스를 반드시 포함합니다
```

활용 예시:

```
서브에이전트를 사용해서 TDD 방식으로 사용자 인증 모듈을 구현해줘.
테스트 에이전트가 먼저 테스트를 작성하고,
구현 에이전트가 코드를 작성하도록 해줘.
```

## 보안 감사 에이전트 예시

보안 검토를 전담하는 서브에이전트:

```markdown
## Security Auditor Agent System Prompt

당신은 보안 감사 전문가입니다:

1. OWASP Top 10 취약점을 기준으로 검사합니다
2. SQL 인젝션, XSS, CSRF 패턴을 탐지합니다
3. 하드코딩된 비밀번호/API 키를 찾습니다
4. 의존성 취약점을 확인합니다
5. 각 발견 사항에 CVSS 점수와 수정 방안을 제시합니다
```

## 병렬 실행의 위력

```
이 프로젝트를 다음 서브에이전트들에게 동시에 분석시켜줘:
1. 보안 감사 에이전트: 보안 취약점 검사
2. 성능 분석 에이전트: 성능 병목 지점 분석
3. 코드 품질 에이전트: 중복 코드, 복잡도 분석
각 에이전트의 결과를 종합해서 보고서를 작성해줘.
```

<Callout type="tip" title="효과적인 에이전트 설계">
서브에이전트는 **하나의 역할에 집중**할 때 가장 효과적입니다. "모든 것을 검사하는 에이전트"보다 "보안만 담당하는 에이전트"와 "성능만 담당하는 에이전트"로 분리하세요.
</Callout>

<Callout type="warning" title="비용 주의">
각 서브에이전트는 독립적인 컨텍스트를 소비합니다. 5개의 서브에이전트를 동시에 실행하면 토큰 사용량이 5배가 될 수 있으므로, 정말 병렬 처리가 필요한 경우에만 사용하세요.
</Callout>

<Practice>
  <PracticeItem>Claude Code에게 "서브에이전트를 사용해서 이 프로젝트의 보안 감사와 코드 품질 분석을 병렬로 수행해줘"라고 요청하여 서브에이전트의 병렬 실행을 경험해보세요</PracticeItem>
  <PracticeItem>TDD 가이드 에이전트에게 간단한 유틸리티 함수(예: 이메일 유효성 검사)를 TDD 방식으로 구현하도록 요청해보세요</PracticeItem>
</Practice>
